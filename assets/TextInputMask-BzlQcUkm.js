import{j as d}from"./jsx-runtime-CKrituN3.js";import{r as v}from"./index-CBqU2yxZ.js";import{c as x}from"./index-Bl6ORisp.js";import{T as y}from"./TextInput-DL9q-H81.js";function I(u,f,e){const n=e||f,s=e?u.replace(/\W/g,""):u.replace(/\D/g,""),m=t=>!Number.isNaN(parseInt(t,10)),c=t=>t?t.match(/[A-Z]/i):!1,g="_#dDmMyY9",T="A";let a="";for(let t=0,i=0;t<n.length;t++){const o=m(s[i]),p=c(s[i]),r=g.indexOf(n[t])>=0,l=T.indexOf(n[t])>=0;if(r&&o||e&&l&&p)a+=s[i++];else{if(s[i]===void 0||!e&&!o&&r||e&&(l&&!p||r&&!p))break;a+=n[t]}}return a}const b=({id:u,className:f,mask:e,value:n,defaultValue:s,charset:m,onChange:c,...g})=>{const T=x({"usa-masked":e},f),[a,t]=v.useState(I(n??s??"",e,m));v.useEffect(()=>{t(I(n??s??"",e,m))},[n]);const[i,o]=v.useState(e.substring(a.length)),p=r=>{const l=I(r.target.value,e,m);o(e.substring(l.length)),t(l),r.target.value=l,c==null||c(r)};return d.jsxs("span",{className:"usa-input-mask",children:[d.jsxs("span",{className:"usa-input-mask--content","aria-hidden":!0,"data-testid":`${u}Mask`,children:[d.jsx("i",{children:a}),i]}),d.jsx(y,{"data-testid":"textInput",className:T,id:u,maxLength:e.length,onChange:p,value:a,...g})]})};b.__docgenInfo={description:"",methods:[],displayName:"TextInputMask",props:{id:{required:!0,tsType:{name:"string"},description:""},name:{required:!0,tsType:{name:"string"},description:""},type:{required:!0,tsType:{name:"union",raw:"'text' | 'email' | 'number' | 'password' | 'search' | 'tel' | 'url'",elements:[{name:"literal",value:"'text'"},{name:"literal",value:"'email'"},{name:"literal",value:"'number'"},{name:"literal",value:"'password'"},{name:"literal",value:"'search'"},{name:"literal",value:"'tel'"},{name:"literal",value:"'url'"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},validationStatus:{required:!1,tsType:{name:"union",raw:"'error' | 'success'",elements:[{name:"literal",value:"'error'"},{name:"literal",value:"'success'"}]},description:""},inputSize:{required:!1,tsType:{name:"union",raw:"'small' | 'medium'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"}]},description:""},inputRef:{required:!1,tsType:{name:"union",raw:`| string
| ((instance: HTMLInputElement | null) => void)
| React.RefObject<HTMLInputElement>
| null
| undefined`,elements:[{name:"string"},{name:"unknown"},{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"null"},{name:"undefined"}]},description:""},inputProps:{required:!1,tsType:{name:"JSX.IntrinsicElements['input']",raw:"JSX.IntrinsicElements['input']"},description:""},mask:{required:!0,tsType:{name:"string"},description:""},charset:{required:!1,tsType:{name:"string"},description:""}}};export{b as T};
