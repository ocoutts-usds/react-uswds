import{a as x,j as u}from"./jsx-runtime-2xDJh5tt.js";import{r as t}from"./index-CBqU2yxZ.js";import{c as q}from"./index-Bl6ORisp.js";const R="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",b=({imageId:r,file:m})=>{const n=t.useRef(new FileReader),[l,F]=t.useState(!0),[g,h]=t.useState(R),[o,_]=t.useState(!1);t.useEffect(()=>(n.current.onloadend=()=>{F(!1),h(n.current.result)},n.current.readAsDataURL(m),()=>{n.current.onloadend=null}),[]);const{name:a}=m,A=()=>{h(R),_(!0)},w=a.indexOf(".pdf")>0,I=a.indexOf(".doc")>0||a.indexOf(".pages")>0,v=a.indexOf(".mov")>0||a.indexOf(".mp4")>0,T=a.indexOf(".xls")>0||a.indexOf(".numbers")>0,D=q("usa-file-input__preview-image",{"is-loading":l,"usa-file-input__preview-image--pdf":o&&w,"usa-file-input__preview-image--word":o&&I,"usa-file-input__preview-image--video":o&&v,"usa-file-input__preview-image--excel":o&&T,"usa-file-input__preview-image--generic":o&&(!w&&!I&&!v&&!T)});return x("div",{"data-testid":"file-input-preview",className:"usa-file-input__preview","aria-hidden":"true",children:[u("img",{id:r,"data-testid":"file-input-preview-image",src:g,alt:"",className:D,onError:A}),a]})};try{b.displayName="FilePreview",b.__docgenInfo={description:"",displayName:"FilePreview",props:{imageId:{defaultValue:null,description:"",name:"imageId",required:!0,type:{name:"string"}},file:{defaultValue:null,description:"",name:"file",required:!0,type:{name:"File"}}}}}catch{}const Y=r=>r.replace(/[^a-z0-9]/g,function(n){const l=n.charCodeAt(0);return l===32?"-":l>=65&&l<=90?`img_${n.toLowerCase()}`:`__${l.toString(16).slice(-4)}`}),H=({name:r,id:m,dragText:n,chooseText:l,errorText:F,disabled:g,multiple:h,className:o,accept:_,onChange:a,onDrop:A,...w},I)=>{const v=t.useRef(null),[T,E]=t.useState(!1),[D,N]=t.useState(!1),[s,C]=t.useState([]),[O,$]=t.useState(!1);t.useEffect(()=>{if(typeof navigator>"u")return;const e=/rv:11.0/i.test(navigator==null?void 0:navigator.userAgent)||/Edge\/\d./i.test(navigator==null?void 0:navigator.userAgent);$(e)},[typeof navigator]),t.useImperativeHandle(I,()=>({input:v.current,clearFiles:()=>C([]),files:s}),[s]);const G=q("usa-file-input",{"usa-file-input--disabled":g},o),M=q("usa-file-input__target",{"usa-file-input--drag":T,"has-invalid-file":D}),j=h?"Drag files here or ":"Drag file here or ",k="choose from folder",B="This is not a valid file type.",p=[];if(s)for(let e=0;e<(s==null?void 0:s.length);e++){const d=Y(s[parseInt(`${e}`)].name),i=`filePreview_${d}`;p.push(u(b,{imageId:d,file:s[parseInt(`${e}`)]},i))}const z=q("usa-file-input__instructions",{"display-none":p.length>0}),Q=p.length>1?`${p.length} files selected`:"Selected file",U=e=>{if(N(!1),_){const d=_.split(",");let i=!0;for(let f=0;f<e.dataTransfer.files.length;f+=1){const y=e.dataTransfer.files[parseInt(`${f}`)];if(i)for(let c=0;c<d.length;c+=1){const V=d[parseInt(`${c}`)];if(i=y.name.indexOf(V)>0||y.type.includes(V.replace(/\*/g,"")),i)break}else break}i||(C([]),N(!0),e.preventDefault(),e.stopPropagation())}},W=()=>E(!0),J=()=>E(!1),K=e=>{U(e),E(!1),A&&A(e)},X=e=>{var i,f,y,c;N(!1);const d=[];if((f=(i=e.target)==null?void 0:i.files)!=null&&f.length){const V=((c=(y=e.target)==null?void 0:y.files)==null?void 0:c.length)||0;for(let S=0;S<V;S++){const L=e.target.files.item(S);L&&d.push(L)}}C(d),a&&a(e)};return u("div",{"data-testid":"file-input",className:G,"aria-disabled":g,children:x("div",{"data-testid":"file-input-droptarget",className:M,onDragOver:W,onDragLeave:J,onDrop:K,children:[p.length>0&&x("div",{"data-testid":"file-input-preview-heading",className:"usa-file-input__preview-heading",children:[Q," ",x("span",{className:"usa-file-input__choose",children:["Change file",p.length>1&&"s"]})]}),x("div",{"data-testid":"file-input-instructions",className:z,"aria-hidden":"true",children:[!O&&u("span",{className:"usa-file-input__drag-text",children:n||j}),u("span",{className:"usa-file-input__choose",children:l||k})]}),p,u("div",{"data-testid":"file-input-box",className:"usa-file-input__box"}),D&&u("div",{"data-testid":"file-input-error",className:"usa-file-input__accepted-files-message",children:F||B}),u("input",{...w,ref:v,type:"file","data-testid":"file-input-input",name:r,id:m,className:"usa-file-input__input",disabled:g,onChange:X,multiple:h,accept:_})]})})},P=t.forwardRef(H);try{H.displayName="FileInputForwardRef",H.__docgenInfo={description:"",displayName:"FileInputForwardRef",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},dragText:{defaultValue:null,description:"",name:"dragText",required:!1,type:{name:"string"}},chooseText:{defaultValue:null,description:"",name:"chooseText",required:!1,type:{name:"string"}},errorText:{defaultValue:null,description:"",name:"errorText",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},multiple:{defaultValue:null,description:"",name:"multiple",required:!1,type:{name:"boolean"}},accept:{defaultValue:null,description:"",name:"accept",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(((e: ChangeEvent<HTMLInputElement>) => void) & ChangeEventHandler<HTMLInputElement>)"}},onDrop:{defaultValue:null,description:"",name:"onDrop",required:!1,type:{name:"(((e: DragEvent<Element>) => void) & DragEventHandler<HTMLInputElement>)"}}}}}catch{}try{P.displayName="FileInput",P.__docgenInfo={description:"",displayName:"FileInput",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(((e: ChangeEvent<HTMLInputElement>) => void) & ChangeEventHandler<HTMLInputElement>)"}},onDrop:{defaultValue:null,description:"",name:"onDrop",required:!1,type:{name:"(((e: DragEvent<Element>) => void) & DragEventHandler<HTMLInputElement>)"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},accept:{defaultValue:null,description:"",name:"accept",required:!1,type:{name:"string"}},multiple:{defaultValue:null,description:"",name:"multiple",required:!1,type:{name:"boolean"}},dragText:{defaultValue:null,description:"",name:"dragText",required:!1,type:{name:"string"}},chooseText:{defaultValue:null,description:"",name:"chooseText",required:!1,type:{name:"string"}},errorText:{defaultValue:null,description:"",name:"errorText",required:!1,type:{name:"string"}}}}}catch{}export{P as F};
