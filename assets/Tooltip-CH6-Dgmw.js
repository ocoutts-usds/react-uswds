import{j as g}from"./jsx-runtime-CKrituN3.js";import{r as a}from"./index-CBqU2yxZ.js";import{c as y}from"./index-Bl6ORisp.js";const O=(s,e=window,i=document.documentElement)=>{const l=s.getBoundingClientRect();return l.top>=0&&l.left>=0&&l.bottom<=(e.innerHeight||i.clientHeight)&&l.right<=(e.innerWidth||i.clientWidth)},L=(s,e)=>parseInt(window.getComputedStyle(s).getPropertyValue(e),10),d=(s,e,i)=>L(i,`margin-${s}`)>0?e-L(i,`margin-${s}`):e;function q(s){return"asCustom"in s}const x=5;function j(s){const e=a.useRef(null),i=a.useRef(null),l=a.useRef(`tooltip-${Math.floor(Math.random()*9e5)+1e5}`),[p,T]=a.useState(!1),[V,$]=a.useState(!1),[m,h]=a.useState(void 0),[A,_]=a.useState(0),[M,S]=a.useState(!1),[w,b]=a.useState({}),{position:H,wrapperclasses:k,className:v}=s,I=(t,o)=>{const n=d("top",t.offsetHeight,o),r=d("left",t.offsetWidth,o);h("top"),b({left:"50%",top:`-${x}px`,margin:`-${n}px 0 0 -${r/2}px`})},W=(t,o)=>{const n=d("left",t.offsetWidth,o);h("bottom"),b({left:"50%",margin:`${x}px 0 0 -${n/2}px`})},N=(t,o)=>{const n=d("top",t.offsetHeight,o);h("right"),b({top:"50%",left:`${o.offsetLeft+o.offsetWidth+x}px`,margin:`-${n/2}px 0 0 0`})},P=(t,o)=>{const n=d("top",t.offsetHeight,o),r=d("left",o.offsetLeft>t.offsetWidth?o.offsetLeft-t.offsetWidth:t.offsetWidth,o);h("left"),b({top:"50%",left:`-${x}px`,margin:`-${n/2}px 0 0 ${o.offsetLeft>t.offsetWidth?r:-r}px`})},B=[I,W,N,P],C=B.length;a.useEffect(()=>{if(p&&e.current&&i.current){const t=e.current,o=i.current;if(O(o))$(!0);else{const r=A;if(r<C||M===!1)if(_(c=>c+1),r<C){const c=B[parseInt(`${r}`)];c(o,t)}else S(!0),_(0);else console.warn("No visible position found - this may mean your tooltip contents is too long!")}}},[m,w,M]),a.useEffect(()=>{if(!p)$(!1),S(!1),_(0);else if(e.current&&i.current){const t=e.current,o=i.current;switch(H){case"top":I(o,t);break;case"bottom":W(o,t);break;case"right":N(o,t);break;case"left":P(o,t);break}}},[p]);const f=()=>{T(!0)},u=()=>{T(!1)},E=y("usa-tooltip",k),R=y("usa-tooltip__body",{"is-set":p,"usa-tooltip__body--top":m==="top","usa-tooltip__body--bottom":m==="bottom","usa-tooltip__body--right":m==="right","usa-tooltip__body--left":m==="left","is-visible":V,"usa-tooltip__body--wrap":p&&M});if(q(s)){const{label:t,title:o,asCustom:n,children:r,...c}=s,D=c,F=y("usa-tooltip__trigger",v),K=a.createElement(n,{...D,ref:e,"data-testid":"triggerElement","aria-describedby":l.current,tabIndex:0,title:"",onMouseEnter:f,onMouseOver:f,onFocus:f,onMouseLeave:u,onBlur:u,onKeyDown:u,className:F},r);return g.jsxs("span",{"data-testid":"tooltipWrapper",className:E,children:[K,g.jsx("span",{"data-testid":"tooltipBody",title:o??(typeof t=="string"?t:void 0),id:l.current,ref:i,className:R,role:"tooltip","aria-hidden":!p,style:w,children:t})]})}else{const{label:t,title:o,children:n,...r}=s,c=y("usa-button","usa-tooltip__trigger",v);return g.jsxs("span",{"data-testid":"tooltipWrapper",className:E,children:[g.jsx("button",{...r,"data-testid":"triggerElement",ref:e,"aria-describedby":l.current,tabIndex:0,type:"button",className:c,title:"",onMouseEnter:f,onMouseOver:f,onFocus:f,onMouseLeave:u,onBlur:u,onKeyDown:u,children:n}),g.jsx("span",{"data-testid":"tooltipBody",title:o??(typeof t=="string"?t:void 0),id:l.current,ref:i,className:R,role:"tooltip","aria-hidden":!p,style:w,children:t})]})}}j.defaultProps={position:"top"};j.__docgenInfo={description:"",methods:[],displayName:"Tooltip",props:{position:{defaultValue:{value:"'top'",computed:!1},required:!1}}};export{j as T};
